#= tips =====

# toggle command history
history

# exec last command
!!

# exec command under number 54 in history
!54

# print
!54:p

# argument (all)
!54:* (or !* - last command)

# argument number
!54:3 (or !54:3-4)

# last argiment
!54:$

# first argument
!54:^

# stderr to dev/null
<cmnd> 2> /dev/null

# all args to /dev/null
<cmnd> 2>&1 /dev/null

# stdout
<cmnd> 1> ...

# replace foo by bar
^foo^bar


#= Shorcuts ====
C - A    go to start of line
C - E    go to end of line
C - D    close terminal session
C - U    cut to buffer
C - W    cut word to buffer
C - Y    paste from buffer
Alt - F  forwrd by one word
Alt - B  back by one word
C - R    reverse search in history (Tab to out and paste foundation, double C - R for next result)
C - G    out from search and continue typing

#= users ===
# add user to group
sudo usermod -a -G groupname username

#= links ===
# create multiple links
ln -s ../bar/* ../

#= pacman ===
# reinstall all dependencies for package
pacman -Si <package> | awk -F ": " -v filter="^Depends" \ '$0 ~ filter {gsub(/[>=<][^ ]*/,"",$2) ; gsub(/ +/,"\n",$2) ; print $2}' | sudo pacman -S --asdeps -

# reinstall all packages
pacman -Q | awk '{ print $1 }' | sort > /tmp/pacman-installed.tmp
pacman -Qm | awk '{ print $1 }' | sort | comm -3 /tmp/pacman-installed.tmp - > /tmp/pacman-to-reinstall.tmp
pacman -S --noconfirm $(cat /tmp/pacman-to-reinstall.tmp)

#= convert ===
convert 1.jpg 2.tif
tesseract 2.tif textfile

#= mount smb share ===
sudo mount -t cifs //192.168.1.8/papka -o username='owpk',password='1422' /mnt/smb

#= disc usage (du) ===
du (disc usage) command estimates file_path space usage
The options -sh are (from man du):

  -s, --summarize
         display only a total for each argument

  -h, --human-readable
         print sizes in human readable format (e.g., 1K 234M 2G)
To check more than one directory and see the total, use du -sch:

  -c, --total
         produce a grand total

du -h --max-depth=1 | sort -hr

#= openvpn client ===
openvpn --config client.ovpn

#= grep ===
# 3 lines up and down
grep -A 3

# line numbers
grep -n

# recursive
grep -r

# negative entries
grep -v

# ignore case
grep -i

# exact matches
grep -x

#= kill ===
kill $(ps ax | grep battery-monitor | perl -nle 'print $1 if /^ *([0-9]+)/')
ps -A -o pid
ps -aef --forest

#= awk ===


#= vnc ===
# ssh connection
ssh user@host -L 5900:localhost:5900 "x11vnc -display :0 -noxdamage"

#= gnome ===
# Gnome wayland switch caps and esc
gsettings set org.gnome.desktop.input-sources xkb-options "['caps:escape']"
gsettings set org.gnome.desktop.peripherals.keyboard repeat-interval 35
gsettings set org.gnome.desktop.peripherals.keyboard delay 200

#= vim ===
# serach and replace
%s/foo/bar

# replace all entries
%s/foo/bar/g

# with confirmation
%s/foo/bar/gc

#= wayland ===
swaymsg -t get_tree | grep -i nautilus

#= GPG ===
gpg –keyserver hkp://keys.gnupg.net –recv-keys <key>

#= Open VPN ===
nmcli connection import type openvpn file <file.ovpn>

#= snapper ===
# create config 'root' of '/' dir
snapper -c root create-config /

# snapshots list
snapper -c config list

# manual snapshoting
snapper -c root create -c timeline --description <desc>

# restore from snapshot
# from live cd
rm -rf /mnt/@<dit_to_restore>
btrfs subvol snapshot /mnt/@snapshots/<your_snap> /mnt/@<dir_to_restore>

# make snapshot writeable
btrfs property set -ts /.snapshots/<snapshot_ver> ro false

#= jshell ===
# import jar
jshell> /env -class-path /lib_path1:/lib_path2

#= kernel ===
# show current loaded modules
lsmod

# show info about module
modinfo <module>

# load module
modprobe <module>
